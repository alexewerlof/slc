<div class="metric-component">
    <h3>Service</h3>
    <markdown-component :markdown="metric.service.markdownDisplayName"></markdown-component>
    <entity-component
        :entity="metric"
        display-name-hint="Metric Name"
        display-name-placeholder="What is this metric measuring?"
        description-hint="How is it measured and where?"
        description-placeholder="Latency measured at the API gateway"
    ></entity-component>
    <div v-if="metric.service.usages.length">
        <h3>
            Symptoms
            <help-component>
                <p>
                    Mark all the failures which their symptoms are measured by this metric.
                </p>
            </help-component>
        </h3>
        <fieldset
            v-for="usage of metric.service.usages"
            :key="usage.id"
        >
            <legend title="Task">{{ usage.task }}</legend>
            <div v-if="usage.failures.length === 0">
                No failure is identified for this usage.
            </div>

            <div
                v-for="failure of usage.failures"
                :key="failure.id"
                class="input-group"
                :title="failure"
            >
                <label>
                    <input
                        type="checkbox"
                        :checked="metric.isFailureLinked(failure)"
                        @change="metric.setFailure(failure, $event.target.checked)">
                        {{ failure.symptom }}
                </label>
            </div>
        </fieldset>
    </div>
</div>