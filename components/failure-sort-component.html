<div class="failure-sort-component surface">
    <h2>
        Sort Risks
        <help-component>
            <p>
                Not all failures are created equal. Some failures have a greater impact on the business than others.
                This exercise will help you understand the relative impact of different failures.
            </p>
        </help-component>
    </h2>
    <p>
        Drag and drop the risks into the order of their business impact.
        The most impactful risk should be at the top of the list.
    </p>
    <div class="well failure-sort-component__failures">
        <TransitionGroup name="failure-sort-component__failure">
            <div
                v-for="(failure, index) of assessment.failures"
                :key="failure"
                class="failure-sort-component__failure frost mozaic"
                draggable="true"
                @dragstart="startDrag($event, index)"
                @drop="onDrop($event, index)"
                @dragenter.prevent
                @dragover.prevent
                >
                <div class="failure-sort-component__controls mozaic__tile mozaic__tile--2a">
                    <button
                        title="Move Up"
                        :disabled="index === 0"
                        @click="swapFailures(index, index - 1)"
                        v-text="icon('up')">
                    </button>
                    <div class="failure-sort-component__index" v-text="index + 1"></div>
                    <button
                        title="Move Down"
                        :disabled="index === assessment.failures.length - 1"
                        @click="swapFailures(index, index + 1)"
                        v-text="icon('down')">
                    </button>
                </div>
                <div class="mozaic__tile mozaic__tile--10c">
                    <div class="subtle-hint">{{ failure }} (impact level: {{ failure.impactLevel }})</div>
                    <div><strong>Consequence:</strong> {{ failure.consequence }}</div>
                    <div><strong>Business Impact:</strong> {{ failure.businessImpact }}</div>
                </div>
            </div>
        </TransitionGroup>
    </div>
</div>