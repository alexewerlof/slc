<div class="assessment-editor-component mozaic mozaic--gap2 pad-gap2">
    <div class="mozaic__tile mozaic__tile--3c surface">
        <chat-component :thread :tools="assessment.tools"></chat-component>
    </div>
    <div class="mozaic__tile mozaic__tile--6c">
        <div class="frost">
            <div class="button-bar">
                <button @click="editingInstance = assessment.providers.pushNew()">
                    <icon-component name="add_circle"></icon-component>
                    New Provider
                </button>
                <button @click="editingInstance = assessment.consumers.pushNew()">
                    <icon-component name="add_circle"></icon-component>
                    New Consumer
                </button>
                <button @click="showDialog('summaryDialog', true)">
                    <icon-component name="article"></icon-component>
                    Summary
                </button>
                <button @click="showDialog('exportDialog', true)">
                    <icon-component name="download"></icon-component>
                    Export
                </button>
            </div>
        </div>
        <assessment-graph-component :assessment @select="(entity) => editingInstance = entity" :selected-entity="editingInstance"></assessment-graph-component>
        <dialog-component title="Summary" ref="summaryDialog">
            <summary-component :assessment></summary-component>
        </dialog-component>
        <dialog-component title="Export" ref="exportDialog">
            <code-block-component>
                <pre>{{ JSON.stringify(assessment.state, null, 2) }}</pre>
            </code-block-component>
        </dialog-component>
    </div>
    <div v-if="editingInstance" class="mozaic__tile mozaic__tile--3c surface">
        <div v-if="editingClassName === 'Provider'">
            <h2>Provider</h2>
            <provider-component :provider="editingInstance"></provider-component>
            <div class="button-bar">
                <button
                    @click="editingInstance.services.pushNew()"
                >
                    <icon-component name="add_circle"></icon-component>
                    New Service
                </button>
                <button
                    @click="removeProvider(editingInstance)"
                    class="button--danger"
                    title="Remove this provider"
                >
                    <icon-component name="delete"></icon-component>
                    Remove Provider
                </button>
            </div>
        </div>
        <div v-if="editingClassName === 'Service'">
            <h2>Service</h2>
            <service-component :service="editingInstance"></service-component>
            <div class="button-bar">
                <button @click="editingInstance.metrics.pushNew()">
                    <icon-component name="add_circle"></icon-component>
                    New Metric
                </button>
                <button
                    @click="removeService(editingInstance)"
                    class="button--danger"
                    title="Remove this service"
                >
                    <icon-component name="delete"></icon-component>
                    Remove Service
                </button>
            </div>
        </div>
        <div v-if="editingClassName === 'Consumer'">
            <h2>Consumer</h2>
            <consumer-component :consumer="editingInstance"></consumer-component>
            <div class="button-bar">
                <button @click="editingInstance.consumptions.pushNew()">
                    <icon-component name="add_circle"></icon-component>
                    New Consumption
                </button>
                <button
                    @click="removeConsumer(editingInstance)"
                    class="button--danger"
                    title="Remove this consumer"
                >
                    <icon-component name="delete"></icon-component>
                    Remove Consumer
                </button>
            </div>
        </div>
        <div v-if="editingClassName === 'Consumption'">
            <h2>Consumption</h2>
            <consumption-component :consumption="editingInstance"></consumption-component>
            <div class="button-bar">
                <button
                    @click="removeConsumption(editingInstance)"
                    class="button--danger"
                    title="Remove this consumption"
                >
                    <icon-component name="delete"></icon-component>
                    Remove Consumption
                </button>
            </div>
        </div>
        <div v-if="editingClassName === 'Dependency'">
            <h2>Dependencies</h2>
            <dependency-component :dependency="editingInstance"></dependency-component>
            <div class="button-bar">
                <button
                    @click="removeDependency(editingInstance)"
                    class="button--danger"
                    title="Remove this dependency"
                >
                    <icon-component name="delete"></icon-component>
                    Remove Dependency
                </button>
            </div>
        </div>
        <div v-if="editingClassName === 'Metric'">
            <h2>Metric</h2>
            <metric-component :metric="editingInstance"></metric-component>
            <div class="button-bar">
                <button
                    @click="removeMetric(editingInstance)"
                    class="button--danger"
                    title="Remove this metric"
                >
                    <icon-component name="delete"></icon-component>
                    Remove Metric
                </button>
            </div>
        </div>
    </div>
</div>
